# This version is the docker-compose file
# version. It is not the version of our
# services. Please see:
# https://docs.docker.com/compose/compose-file/compose-file-v3/
version: "3.7"

networks:
  default:
    external:
      name: "wasdi-network"

services:
  nb_{{ wasdiNotebookId }}:
    environment:
      - WASDI_NOTEBOOK_ID={{ wasdiNotebookId }}
    image: "${sContainerName:?err}:${sContainerVersion:?err}"
    container_name: "nb_{{ wasdiNotebookId }}"
    restart: "unless-stopped"
    user: "tomcat:tomcat"
    stdin_open: true
    tty: true
    volumes:
      - "/data/wasdi/{{ wasdiUserName }}/{{ wasdiWorkspaceId }}:/data/wasdi"
      - "/data/wasdi/{{ wasdiUserName }}/{{ wasdiWorkspaceId }}/notebook:/home/wasdi/notebook"
      - "./sysadmin/etc_supervisor_supervisord.conf:/etc/supervisor/supervisord.conf:ro"
