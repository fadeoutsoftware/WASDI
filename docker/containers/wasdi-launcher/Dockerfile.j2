FROM wasdi-base-launcher:latest


LABEL org.opencontainers.image.authors="WASDI SARL"


# Labels used to search our containers and/or images
LABEL docker-image-name={{ sWasdiLauncherServiceName }}


# Set the workdir
WORKDIR {{ sWasdiLauncherRootDirectoryPath }}


# Copy JNI libs
COPY --chown={{ sWasdiLauncherRootDirectoryOwner }}:{{ sWasdiLauncherRootDirectoryGroup }} ./dataToCopy/linux-x86-64/* {{ sWasdiLauncherRootDirectoryPath }}/linux-x86-64/

# Copy launcher artifact
COPY --chown={{ sWasdiLauncherRootDirectoryOwner }}:{{ sWasdiLauncherRootDirectoryGroup }} ./dataToCopy/{{ sWasdiLauncherBuildTargetFileName }} {{ sWasdiLauncherRootDirectoryPath }}/{{ sWasdiLauncherBuildTargetFileName }}

ENV LD_LIBRARY_PATH="{{ sWasdiLauncherRootDirectoryPath }}/linux-x86-64/"
ENV PATH="{{ sWasdiLauncherRootDirectoryPath }}/:{{ sWasdiLauncherRootDirectoryPath }}/linux-x86-64/:${PATH}"

