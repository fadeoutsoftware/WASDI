#!/bin/bash

if [[ "${USER}" != "{{ sWasdiSystemUserName }}" ]]
then
    echo "[ERROR] You are '${USER}' when should be '{{ sWasdiSystemUserName }}'"
    exit 1
fi

docker \
    run \
    --interactive \
    --rm \
    --mount type=bind,source={{ sWasdiConfigurationRootDirectoryPath }},destination={{ sWasdiConfigurationRootDirectoryPath }},readonly \
    --mount type=bind,source={{ sWasdiDataRootDirectoryPath }},destination={{ sWasdiDataRootDirectoryPath }} \
    --network {{ sWasdiDockerNetworkName }} \
    --tty \
    {{ sWasdiTriggerServiceName }}:latest \
    ${@}
